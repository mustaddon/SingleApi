<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    <input id="file" type="file" onchange="onChange(this)" />

    <script>
        async function onChange(e) {
            if (!e.files.length)
                return;

            const file = e.files[0];
            console.log('selected:', file);

            let r = await fetch('/mediatr/FileUpload', {
                method: 'POST',
                headers: {
                    'content-type': file.type ?? 'application/octet-stream',
                    'content-disposition': `attachment; filename*=utf-8''` + encodeURIComponent(file.name),
                    'sapi-metadata': encodeURIComponent(JSON.stringify({
                        author: 'Test',
                        date: new Date(),
                    })),
                },
                body: file,
            }).then(r => r.json());

            console.log('result:', r);
        }
    </script>
</body>
</html>